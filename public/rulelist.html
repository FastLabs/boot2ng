<div ng-controller='ruleController'>
    <h2>Rule Definitions</h2>
    <form class='form-horizontal span10' ng-submit='updateRule()'>
        <fieldset class='control-group'>
            <input class='input-xlarge console span9' type='text' ng-model='text'> </input>
            <div class='btn-group modebar'>
                <a class='btn'  ng-click='enterInputMode()' ng-class='commandBox.isSelected("enter")'> <i class="icon-bookmark"></i></a>
                <a class='btn' ng-click='enterSearchMode()' ng-class='commandBox.isSelected("search")'> <i class="icon-search"></i></a>
            </div>
        </fieldset>
    </form>
    <div class="ruleContainer" ng-show='isInputMode()' >
        <div style='margin-bottom: 2px;'>
            <span class='label label-important'>Name:</span> <span style='font-size:14px; font-weight:bold;'> {{currentRule.name}} </span>
        </div>
        <div>
            <span class='label label-info'> Attributes</span>
            <ul>
                <li class='removable' ng-repeat='(key, value) in currentRule.attributes'>
                    <div class="removable"> {{key}} : {{value}}
                        <a ng-click='removeAttribute(key)'><i class='icon-remove'></i></a></div>
                </li>
            </ul>
        </div>
        <span class='label label-success'>IF</span>
        <ul>
            <li ng-repeat='condition in currentRule.conditions'>
                {{condition}}
            </li>
        </ul>
        <span class='label label-success'>THEN </span>
        <ul>
            <li ng-repeat='action in currentRule.actions'>
                {{action}}
            </li>
        </ul>
        <span class='label label-info'>Comments:</span>
        <div style="margin-top: 8px">


        <div class='well span8'  style="clear:left;">
            {{currentRule.comment}}
        </div>
        </div>
    </div>
    <!-- display the rule list-->
    <div class='row-fluid' ng-show='isSearchMode()'>
        <div class='span5'>
            <ul class='rules'>
                <li class='thumbnail removable' ng-repeat='rule in rules | filter:text'>
                    {{rule.name}}
                    <a href="/rules/remove/{{rule.attributes.id}}">
                        <i class="icon-eye-open"></i>
                    </a>
                    <i class="icon-edit"></i>
                    <a ng-click="removeArtifact(rule)"> <i class="icon-remove"></i></a>
                </li>
            </ul>
        </div>
    </div>
</div>